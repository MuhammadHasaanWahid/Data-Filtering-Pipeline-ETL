{"$schema":"http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{"factoryName":{"type":"string","metadata":"Data Factory name"},"AzureDataLakeStorage":{"type":"string"}},"variables":{"factoryId":"[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"},"resources":[{"name":"[concat(parameters('factoryName'), '/Second Portfolio Project')]","type":"Microsoft.DataFactory/factories/pipelines","apiVersion":"2018-06-01","properties":{"activities":[{"name":"SecondProject","type":"ExecuteDataFlow","dependsOn":[],"policy":{"timeout":"0.12:00:00","retry":0,"retryIntervalInSeconds":30,"secureOutput":false,"secureInput":false},"userProperties":[],"typeProperties":{"dataflow":{"referenceName":"Portfolio2","type":"DataFlowReference","parameters":{},"datasetParameters":{"CSVData":{},"UsaFilteredData":{},"FranciaFilteredData":{},"MexicoFilteredData":{}}},"staging":{},"compute":{"coreCount":8,"computeType":"General"},"traceLevel":"Fine"}}],"policy":{"elapsedTimeMetric":{},"cancelAfter":{}},"annotations":[],"lastPublishTime":"2023-04-29T10:55:27Z"},"dependsOn":["[concat(variables('factoryId'), '/dataflows/Portfolio2')]"]},{"name":"[concat(parameters('factoryName'), '/Portfolio2')]","type":"Microsoft.DataFactory/factories/dataflows","apiVersion":"2018-06-01","properties":{"type":"MappingDataFlow","typeProperties":{"sources":[{"dataset":{"referenceName":"SupplyChainData","type":"DatasetReference"},"name":"CSVData"}],"sinks":[{"dataset":{"referenceName":"USAFilteredData","type":"DatasetReference"},"name":"UsaFilteredData"},{"dataset":{"referenceName":"FranciaFilteredData","type":"DatasetReference"},"name":"FranciaFilteredData"},{"dataset":{"referenceName":"MexicoFiltered","type":"DatasetReference"},"name":"MexicoFilteredData"}],"transformations":[{"name":"USADATA"},{"name":"FRANCIADATA"},{"name":"MexicoData"}],"scriptLines":["source(output(","          Type as string,","          {Days for shipping (real)} as string,","          {Days for shipment (scheduled)} as string,","          {Benefit per order} as string,","          {Sales per customer} as string,","          {Delivery Status} as string,","          Late_delivery_risk as string,","          {Category Id} as string,","          {Category Name} as string,","          {Customer City} as string,","          {Customer Country} as string,","          {Customer Email} as string,","          {Customer Fname} as string,","          {Customer Id} as string,","          {Customer Lname} as string,","          {Customer Password} as string,","          {Customer Segment} as string,","          {Customer State} as string,","          {Customer Street} as string,","          {Customer Zipcode} as string,","          {Department Id} as string,","          {Department Name} as string,","          Latitude as string,","          Longitude as string,","          Market as string,","          {Order City} as string,","          {Order Country} as string,","          {Order Customer Id} as string,","          {order date (DateOrders)} as string,","          {Order Id} as string,","          {Order Item Cardprod Id} as string,","          {Order Item Discount} as string,","          {Order Item Discount Rate} as string,","          {Order Item Id} as string,","          {Order Item Product Price} as string,","          {Order Item Profit Ratio} as string,","          {Order Item Quantity} as string,","          Sales as string,","          {Order Item Total} as string,","          {Order Profit Per Order} as string,","          {Order Region} as string,","          {Order State} as string,","          {Order Status} as string,","          {Order Zipcode} as string,","          {Product Card Id} as string,","          {Product Category Id} as string,","          {Product Description} as string,","          {Product Image} as string,","          {Product Name} as string,","          {Product Price} as string,","          {Product Status} as string,","          {shipping date (DateOrders)} as string,","          {Shipping Mode} as string","     ),","     allowSchemaDrift: true,","     validateSchema: false,","     ignoreNoFilesFound: false) ~> CSVData","CSVData filter(equals('Estados Unidos',{Order Country})) ~> USADATA","CSVData filter(equals('Francia', {Order Country})) ~> FRANCIADATA","CSVData filter(equals({Order Country},'MÃ©xico')) ~> MexicoData","USADATA sink(allowSchemaDrift: true,","     validateSchema: false,","     umask: 0022,","     preCommands: [],","     postCommands: [],","     skipDuplicateMapInputs: true,","     skipDuplicateMapOutputs: true) ~> UsaFilteredData","FRANCIADATA sink(allowSchemaDrift: true,","     validateSchema: false,","     umask: 0022,","     preCommands: [],","     postCommands: [],","     skipDuplicateMapInputs: true,","     skipDuplicateMapOutputs: true) ~> FranciaFilteredData","MexicoData sink(allowSchemaDrift: true,","     validateSchema: false,","     umask: 0022,","     preCommands: [],","     postCommands: [],","     skipDuplicateMapInputs: true,","     skipDuplicateMapOutputs: true,","     saveOrder: 1) ~> MexicoFilteredData"]}},"dependsOn":["[concat(variables('factoryId'), '/datasets/SupplyChainData')]","[concat(variables('factoryId'), '/datasets/USAFilteredData')]","[concat(variables('factoryId'), '/datasets/FranciaFilteredData')]","[concat(variables('factoryId'), '/datasets/MexicoFiltered')]"]},{"name":"[concat(parameters('factoryName'), '/SupplyChainData')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('AzureDataLakeStorage')]","type":"LinkedServiceReference"},"annotations":[],"type":"DelimitedText","typeProperties":{"location":{"type":"AzureBlobFSLocation","fileName":"DataCoSupplyChainDataset.csv","folderPath":"csv data","fileSystem":"data"},"columnDelimiter":",","encodingName":"ISO-8859-1","escapeChar":"\\","firstRowAsHeader":true,"quoteChar":"\""},"schema":[{"name":"Type","type":"String"},{"name":"Days for shipping (real)","type":"String"},{"name":"Days for shipment (scheduled)","type":"String"},{"name":"Benefit per order","type":"String"},{"name":"Sales per customer","type":"String"},{"name":"Delivery Status","type":"String"},{"name":"Late_delivery_risk","type":"String"},{"name":"Category Id","type":"String"},{"name":"Category Name","type":"String"},{"name":"Customer City","type":"String"},{"name":"Customer Country","type":"String"},{"name":"Customer Email","type":"String"},{"name":"Customer Fname","type":"String"},{"name":"Customer Id","type":"String"},{"name":"Customer Lname","type":"String"},{"name":"Customer Password","type":"String"},{"name":"Customer Segment","type":"String"},{"name":"Customer State","type":"String"},{"name":"Customer Street","type":"String"},{"name":"Customer Zipcode","type":"String"},{"name":"Department Id","type":"String"},{"name":"Department Name","type":"String"},{"name":"Latitude","type":"String"},{"name":"Longitude","type":"String"},{"name":"Market","type":"String"},{"name":"Order City","type":"String"},{"name":"Order Country","type":"String"},{"name":"Order Customer Id","type":"String"},{"name":"order date (DateOrders)","type":"String"},{"name":"Order Id","type":"String"},{"name":"Order Item Cardprod Id","type":"String"},{"name":"Order Item Discount","type":"String"},{"name":"Order Item Discount Rate","type":"String"},{"name":"Order Item Id","type":"String"},{"name":"Order Item Product Price","type":"String"},{"name":"Order Item Profit Ratio","type":"String"},{"name":"Order Item Quantity","type":"String"},{"name":"Sales","type":"String"},{"name":"Order Item Total","type":"String"},{"name":"Order Profit Per Order","type":"String"},{"name":"Order Region","type":"String"},{"name":"Order State","type":"String"},{"name":"Order Status","type":"String"},{"name":"Order Zipcode","type":"String"},{"name":"Product Card Id","type":"String"},{"name":"Product Category Id","type":"String"},{"name":"Product Description","type":"String"},{"name":"Product Image","type":"String"},{"name":"Product Name","type":"String"},{"name":"Product Price","type":"String"},{"name":"Product Status","type":"String"},{"name":"shipping date (DateOrders)","type":"String"},{"name":"Shipping Mode","type":"String"}]},"dependsOn":[]},{"name":"[concat(parameters('factoryName'), '/USAFilteredData')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('AzureDataLakeStorage')]","type":"LinkedServiceReference"},"annotations":[],"type":"DelimitedText","typeProperties":{"location":{"type":"AzureBlobFSLocation","fileName":"UnitedStates","folderPath":"final csv data","fileSystem":"data"},"columnDelimiter":",","escapeChar":"\\","firstRowAsHeader":true,"quoteChar":"\""},"schema":[]},"dependsOn":[]},{"name":"[concat(parameters('factoryName'), '/FranciaFilteredData')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('AzureDataLakeStorage')]","type":"LinkedServiceReference"},"annotations":[],"type":"DelimitedText","typeProperties":{"location":{"type":"AzureBlobFSLocation","fileName":"France","folderPath":"final csv data","fileSystem":"data"},"columnDelimiter":",","escapeChar":"\\","firstRowAsHeader":true,"quoteChar":"\""},"schema":[]},"dependsOn":[]},{"name":"[concat(parameters('factoryName'), '/MexicoFiltered')]","type":"Microsoft.DataFactory/factories/datasets","apiVersion":"2018-06-01","properties":{"linkedServiceName":{"referenceName":"[parameters('AzureDataLakeStorage')]","type":"LinkedServiceReference"},"annotations":[],"type":"DelimitedText","typeProperties":{"location":{"type":"AzureBlobFSLocation","fileName":"Mexico","folderPath":"final csv data","fileSystem":"data"},"columnDelimiter":",","escapeChar":"\\","quoteChar":"\""},"schema":[]},"dependsOn":[]}]}